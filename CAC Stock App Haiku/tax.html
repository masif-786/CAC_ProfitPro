<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProfitPro Ultimate Tax Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #000;
            color: #00BFFF;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        nav {
            background-color: #00BFFF;
            padding: 10px 0;
        }
        nav ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
            display: flex;
            justify-content: center;
        }
        nav ul li {
            margin: 0 15px;
        }
        nav ul li a {
            color: #000;
            text-decoration: none;
            font-weight: bold;
        }
        h1, h2 {
            text-align: center;
        }
        .calculator {
            background-color: #111;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .input-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        input, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #00BFFF;
            border-radius: 4px;
            background-color: #000;
            color: #00BFFF;
        }
        button {
            background-color: #00BFFF;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        .results {
            margin-top: 20px;
        }
        .chart-container {
            width: 100%;
            max-width: 600px;
            margin: 20px auto;
        }
        footer {
            background-color: #00BFFF;
            color: #000;
            text-align: center;
            padding: 10px 0;
            position: fixed;
            bottom: 0;
            width: 100%;
        }
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <nav>
        <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="calc.html">Calculators</a></li>
            <li><a href="sim.html">Stock Sim</a></li>
            <li><a href="trivia.html">Trivia</a></li>
            <li><a href="edu.html">Education</a></li>
        </ul>
    </nav>

    <div class="container">
        <h1>ProfitPro Ultimate Tax Calculator</h1>
        
        <div class="calculator">
            <h2>Input Your Information</h2>
            <div class="input-group">
                <label for="income">Annual Income:</label>
                <input type="number" id="income" required>
            </div>
            <div class="input-group">
                <label for="filing-status">Filing Status:</label>
                <select id="filing-status">
                    <option value="single">Single</option>
                    <option value="married-joint">Married Filing Jointly</option>
                    <option value="married-separate">Married Filing Separately</option>
                    <option value="head-household">Head of Household</option>
                </select>
            </div>
            <div class="input-group">
                <label for="state">State:</label>
                <select id="state">
                    <option value="AL">Alabama</option>
                    <option value="AK">Alaska</option>
                    <option value="AZ">Arizona</option>
                    <option value="AR">Arkansas</option>
                    <option value="CA">California</option>
                    <option value="CO">Colorado</option>
                    <option value="CT">Connecticut</option>
                    <option value="DE">Delaware</option>
                    <option value="FL">Florida</option>
                    <option value="GA">Georgia</option>
                    <option value="HI">Hawaii</option>
                    <option value="ID">Idaho</option>
                    <option value="IL">Illinois</option>
                    <option value="IN">Indiana</option>
                    <option value="IA">Iowa</option>
                    <option value="KS">Kansas</option>
                    <option value="KY">Kentucky</option>
                    <option value="LA">Louisiana</option>
                    <option value="ME">Maine</option>
                    <option value="MD">Maryland</option>
                    <option value="MA">Massachusetts</option>
                    <option value="MI">Michigan</option>
                    <option value="MN">Minnesota</option>
                    <option value="MS">Mississippi</option>
                    <option value="MO">Missouri</option>
                    <option value="MT">Montana</option>
                    <option value="NE">Nebraska</option>
                    <option value="NV">Nevada</option>
                    <option value="NH">New Hampshire</option>
                    <option value="NJ">New Jersey</option>
                    <option value="NM">New Mexico</option>
                    <option value="NY">New York</option>
                    <option value="NC">North Carolina</option>
                    <option value="ND">North Dakota</option>
                    <option value="OH">Ohio</option>
                    <option value="OK">Oklahoma</option>
                    <option value="OR">Oregon</option>
                    <option value="PA">Pennsylvania</option>
                    <option value="RI">Rhode Island</option>
                    <option value="SC">South Carolina</option>
                    <option value="SD">South Dakota</option>
                    <option value="TN">Tennessee</option>
                    <option value="TX">Texas</option>
                    <option value="UT">Utah</option>
                    <option value="VT">Vermont</option>
                    <option value="VA">Virginia</option>
                    <option value="WA">Washington</option>
                    <option value="WV">West Virginia</option>
                    <option value="WI">Wisconsin</option>
                    <option value="WY">Wyoming</option>                    
                </select>
            </div>
            <div class="input-group">
                <label for="deductions">Itemized Deductions:</label>
                <input type="number" id="deductions">
            </div>
            <div class="input-group">
                <label for="credits">Tax Credits:</label>
                <input type="number" id="credits">
            </div>
            <div class="input-group">
                <label for="dependents">Number of Dependents:</label>
                <input type="number" id="dependents">
            </div>
            <div class="input-group">
                <label for="retirement-contributions">Retirement Contributions:</label>
                <input type="number" id="retirement-contributions">
            </div>
            <div class="input-group">
                <label for="investment-income">Investment Income:</label>
                <input type="number" id="investment-income">
            </div>
            <button onclick="calculateTax()">Calculate Taxes</button>
        </div>

        <div class="results" id="results"></div>

        <div class="chart-container">
            <canvas id="taxBreakdownChart"></canvas>
        </div>

        <div class="chart-container">
            <canvas id="taxRateChart"></canvas>
        </div>

        <div class="navigation-buttons">
            <button onclick="previousPage()">Previous</button>
        </div>
    </div>

    <footer>
        <p>&copy; 2024 ProfitPro. All rights reserved.</p>
    </footer>

    <script>
        function calculateTax() {
            const income = parseFloat(document.getElementById('income').value);
            const filingStatus = document.getElementById('filing-status').value;
            const state = document.getElementById('state').value;
            const deductions = parseFloat(document.getElementById('deductions').value) || 0;
            const credits = parseFloat(document.getElementById('credits').value) || 0;
            const dependents = parseInt(document.getElementById('dependents').value) || 0;
            const retirementContributions = parseFloat(document.getElementById('retirement-contributions').value) || 0;
            const investmentIncome = parseFloat(document.getElementById('investment-income').value) || 0;

            // Federal tax calculation (simplified progressive tax system)
            let federalTax = 0;
            let taxableIncome = income - deductions - retirementContributions;

            const federalBrackets = [
                { rate: 0.10, limit: 9950 },
                { rate: 0.12, limit: 40525 },
                { rate: 0.22, limit: 86375 },
                { rate: 0.24, limit: 164925 },
                { rate: 0.32, limit: 209425 },
                { rate: 0.35, limit: 523600 },
                { rate: 0.37, limit: Infinity }
            ];

            let remainingIncome = taxableIncome;
            for (let bracket of federalBrackets) {
                if (remainingIncome > 0) {
                    let taxableAmount = Math.min(remainingIncome, bracket.limit);
                    federalTax += taxableAmount * bracket.rate;
                    remainingIncome -= taxableAmount;
                } else {
                    break;
                }
            }

            // State tax calculation (example for a few states, you can add more)
            let stateTax = 0;
            const stateTaxRates = {
                'AL': 0.05,
                'AK': 0,
                'AZ': 0.045,
                'OK': 0.045,
                // Add more states here
            };

            if (state in stateTaxRates) {
                stateTax = taxableIncome * stateTaxRates[state];
            }

            // Apply tax credits
            federalTax = Math.max(federalTax - credits, 0);

            // Calculate effective tax rates
            const effectiveFederalRate = (federalTax / income) * 100;
            const effectiveStateRate = (stateTax / income) * 100;
            const effectiveTotalRate = ((federalTax + stateTax) / income) * 100;

            // Display results
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <h2>Tax Calculation Results</h2>
                <p>Federal Tax: $${federalTax.toFixed(2)}</p>
                <p>State Tax: $${stateTax.toFixed(2)}</p>
                <p>Total Tax: $${(federalTax + stateTax).toFixed(2)}</p>
                <p>Effective Federal Tax Rate: ${effectiveFederalRate.toFixed(2)}%</p>
                <p>Effective State Tax Rate: ${effectiveStateRate.toFixed(2)}%</p>
                <p>Effective Total Tax Rate: ${effectiveTotalRate.toFixed(2)}%</p>
                <p>After-Tax Income: $${(income - federalTax - stateTax).toFixed(2)}</p>
            `;

            // Create charts
            createTaxBreakdownChart(federalTax, stateTax);
            createTaxRateChart(effectiveFederalRate, effectiveStateRate, effectiveTotalRate);
        }

        function createTaxBreakdownChart(federalTax, stateTax) {
            const ctx = document.getElementById('taxBreakdownChart').getContext('2d');
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Federal Tax', 'State Tax'],
                    datasets: [{
                        data: [federalTax, stateTax],
                        backgroundColor: ['#00BFFF', '#87CEFA']
                    }]
                },
                options: {
                    responsive: true,
                    title: {
                        display: true,
                        text: 'Tax Breakdown'
                    }
                }
            });
        }

        function createTaxRateChart(federalRate, stateRate, totalRate) {
            const ctx = document.getElementById('taxRateChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Federal', 'State', 'Total'],
                    datasets: [{
                        label: 'Effective Tax Rates',
                        data: [federalRate, stateRate, totalRate],
                        backgroundColor: ['#00BFFF', '#87CEFA', '#1E90FF']
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Tax Rate (%)'
                            }
                        }
                    },
                    title: {
                        display: true,
                        text: 'Effective Tax Rates'
                    }
                }
            });
        }

        function previousPage() {
            window.location.href = "social-security.html";
            console.log("Previous page");
        }

        
    </script>
</body>
</html>